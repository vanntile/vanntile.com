@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  @font-face {
    font-family: 'Objectivity';
    font-style: normal;
    font-weight: normal;
    font-display: swap;
    src: url('/fonts/Objectivity-Regular.woff2') format('woff2');
  }

  @font-face {
    font-family: 'Objectivity';
    font-style: normal;
    font-weight: bold;
    font-display: swap;
    src: url('/fonts/Objectivity-Bold.woff2') format('woff2');
  }

  /* Stop any animation if the user has set their device to "prefers reduced motion". */
  /* stylelint-disable-next-line at-rule-no-unknown */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation: none !important;
      transition: none !important;
      animation-duration: 0.1s !important;
      transition-duration: 0.1s !important;
    }
  }

  :root {
    --brand-accent: #FF9A63;
    --nprogress-color: var(--brand-accent);
  }

  ::selection {
    @apply bg-brand text-gray-50 dark:bg-gray-100 dark:text-brand;
  }

  html {
    scroll-behavior: smooth;
    min-width: 320px;
  }

  body {
    @apply text-sm leading-6 text-gray-700 dark:text-brand-tint md:text-base md:leading-7 2xl:text-2xl 2xl:leading-relaxed;
  }

  /* Remove Safari input shadow on mobile */
  input[type='text'],
  input[type='email'] {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  h1 {
    @apply mt-0 text-3xl font-extrabold text-gray-900 dark:text-gray-100 md:text-4xl 2xl:leading-none 2xl:text-7xl;
    margin-bottom: 0.875em;
  }

  h2 {
    @apply text-2xl font-bold text-gray-900 dark:text-brand-tint md:text-2xl 2xl:text-5xl 2xl:leading-none;
    margin-top: 1.6em;
    margin-bottom: 0.75em;
  }

  h3, h4 {
    @apply font-semibold;
    margin-top: 1.55em;
    margin-bottom: 0.6em;
  }

  h3 {
    @apply text-lg md:text-xl 2xl:text-4xl 2xl:leading-tight;
  }

  h4 {
    @apply leading-5 md:leading-normal;
  }

  :is(h2, h3, h4) {
    scroll-margin-top: 3rem;
  }

  p {
    margin-top: calc(16em / 14);
    margin-bottom: calc(16em / 14);
  }

  figure > * {
    margin-top: 0;
    margin-bottom: 0;
  }

  :is(h2, h3, h4) + * {
    @apply mt-0;
  }

  a {
    @apply relative font-bold no-underline text-brand hover:text-brand dark:text-brand-accent;
  }

  a::after {
    @apply absolute left-0 w-full h-1 transition-transform duration-500 origin-right transform scale-x-0 bg-current -bottom-2;
    content: "";
  }

  :is(a:hover, a:focus)::after {
    @apply origin-left scale-x-100;
  }

  /* Quotes, pre, code */

  blockquote {
    @apply italic font-medium text-gray-900 border-l-4 border-gray-200 dark:border-gray-700 dark:text-gray-300;
    quotes: "\\201C" "\\201D" "\\2018" "\\2019";
    margin-top: calc(24em / 18);
    margin-bottom: calc(24em / 18);
    padding-left: calc(20em / 18);
  }

  pre {
    @apply px-3 py-2 my-5 overflow-x-auto text-gray-800 border border-gray-200 rounded dark:border-gray-600 dark:bg-gray-900 dark:text-gray-200 bg-gray-50 md:my-6 2xl:my-8 md:px-4 md:py-3 2xl:px-8 2xl:py-7;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  pre::-webkit-scrollbar {
    display: none;
  }

  code {
    @apply text-xs font-medium text-gray-900 2xl:font-semibold dark:bg-gray-900 dark:text-gray-200 bg-gray-50 md:text-base 2xl:text-xl;
  }

  a code {
    @apply text-brand dark:text-brand-accent;
  }

  h2 code, h3 code {
    font-size: inherit;
  }

  /* Lists */
  ol, ul {
    margin-top: calc(16em / 14);
    margin-bottom: calc(16em / 14);
  }

  li {
    margin-top: calc(4em / 14);
    margin-bottom: clac(4em / 14);
  }

  :is(ol, ul) > li {
    @apply relative;
    padding-left: calc(22em / 14);
  }

  ol > li::before {
    @apply absolute left-0 font-normal text-current;
    content: counter(list-item, decimal) ".";
  }

  ul > li::before {
    @apply absolute bg-current rounded-full;
    content: '';
    width: calc(5em / 14);
    height: calc(5em / 14);
    top: calc(5.5em / 14);
    left: calc(3em / 14);
  }

  ul > li p {
    margin-top: calc(8em / 14);
    margin-bottom: calc(8em / 14);
  }

  :is(ol, ul) > li > *:first-child {
    margin-top: calc(16em / 14);
  }

  :is(ol, ul) > li > *:last-child {
    margin-bottom: calc(16em / 14);
  }

  ul ul, ul ol, ol ul, ol ol {
    margin-top: calc(8em / 14);
    margin-bottom: calc(8em / 14);
  }

  /* Images */
  :is(img, video, figure) {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
  }

  figure figcaption {
    @apply leading-snug;
    font-size: 0.875em;
    margin-top: 0.875em;
  }

  @screen md {
    :is(h2, h3, h4) {
      scroll-margin-top: 8rem;
    }

    p {
      margin-top: calc(20em / 16);
      margin-bottom: calc(20em / 16);
    }

    blockquote {
      margin-top: calc(32em / 20);
      margin-bottom: calc(32em / 20);
      padding-left: calc(20em / 20);
    }

    /* Lists */
    ol, ul {
      margin-top: calc(20em / 16);
      margin-bottom: calc(20em / 16);
    }

    li {
      margin-top: calc(8em / 16);
      margin-bottom: clac(8em / 16);
    }

    :is(ol, ul) > li {
      padding-left: calc(28em / 16);
    }

    ul > li::before {
      width: calc(6em / 16);
      height: calc(6em / 16);
      top: calc(8.5em / 16);
      left: calc(4em / 16);
    }

    ul > li p {
      margin-top: calc(12em / 16);
      margin-bottom: calc(12em / 16);
    }

    :is(ol, ul) > li > *:first-child {
      margin-top: calc(20em / 16);
    }

    :is(ol, ul) > li > *:last-child {
      margin-bottom: calc(20em / 16);
    }

    ul ul, ul ol, ol ul, ol ol {
      margin-top: calc(12em / 16);
      margin-bottom: calc(12em / 16);
    }
  }

  @screen 2xl {
    p {
      margin-top: calc(32em / 24);
      margin-bottom: calc(32em / 24);
    }

    blockquote {
      margin-top: calc(64em / 36);
      margin-bottom: calc(64em / 36);
      padding-left: calc(40em / 36);
    }

    /* Lists */
    ol, ul {
      margin-top: calc(32em / 24);
      margin-bottom: calc(32em / 24);
    }

    li {
      margin-top: calc(12em / 24);
      margin-bottom: clac(12em / 24);
    }

    :is(ol, ul) > li {
      padding-left: calc(40em / 24);
    }

    ul > li::before {
      width: calc(8em / 24);
      height: calc(8em / 24);
      top: calc(10.5em / 24);
      left: calc(6em / 24);
    }

    ul > li p {
      margin-top: calc(20em / 24);
      margin-bottom: calc(20em / 24);
    }

    :is(ol, ul) > li > *:first-child {
      margin-top: calc(32em / 24);
    }

    :is(ol, ul) > li > *:last-child {
      margin-bottom: calc(32em / 24);
    }

    ul ul, ul ol, ol ul, ol ol {
      margin-top: calc(16em / 24);
      margin-bottom: calc(16em / 24);
    }
  }
}

.pseudo-none::before, .pseudo-none:hover::before, .pseudo-none:focus::before,
.pseudo-none::after, .pseudo-none:hover::after, .pseudo-none:focus::after {
  display: none!important;
}

:is(ol, ul).pseudo-none li::before {
  display: none!important;
}

/*** remark-code-title ***/
.remark-code-title {
  @apply px-3 py-2 font-mono text-sm font-bold text-gray-800 bg-gray-200 border border-b-0 border-gray-200 rounded-t dark:bg-gray-800 dark:text-gray-200 2xl:text-lg dark:border-gray-600 md:px-4 md:py-3 2xl:px-8 2xl:py-7;
}

.remark-code-title + pre {
  @apply mt-0 rounded-t-none;
}

/*** mdxPrism code highlighting ***/
.token:is(.comment,.prolog,.doctype,.cdata) {
  @apply text-gray-700 dark:text-green-500;
}

.token.punctuation {
  @apply text-gray-700 dark:text-gray-300;
}

.token:is(.property,.tag,.boolean,.number,.unit,.constant,.symbol,.deleted) {
  @apply text-green-500 dark:text-yellow-400;
}

.token:is(.selector,.attr-value,.string,.char,.builtin,.inserted) {
  @apply text-purple-500 dark:text-red-400;
}

.token:is(.operator,.entity,.url,.attr-name),
:is(.language-css,.language-scss,.style) .token.property {
  @apply text-blue-800 dark:text-blue-300;
}

.token:is(.atrule,.maybe-class-name) {
  @apply text-blue-800 dark:text-yellow-400;
}

.token:is(.function,.class-name,.keyword) {
  @apply text-pink-600 dark:text-white;
}

.token:is(.regex,.important,.variable) {
  @apply text-pink-600 dark:text-blue-300;
}

/*** remark-hint styling ***/
.hint {
  @apply p-4 my-4 border;
}

.hint.tip {
  @apply text-blue-900 border-blue-300 dark:text-blue-200 dark:border-blue-500 bg-blue-50 dark:bg-blue-900;
}

.hint.tip::selection {
  @apply bg-blue-900 text-gray-50 dark:bg-gray-50 dark:text-blue-900;
}

.hint.warn {
  @apply text-yellow-900 border-yellow-300 dark:text-gray-900 bg-yellow-50 dark:bg-yellow-500;
}

.hint.warn::selection {
  @apply bg-yellow-500 text-gray-50 dark:bg-gray-50 dark:text-gray-900;
}

.hint.error {
  @apply text-red-500 border-red-200 dark:text-red-200 dark:border-red-900 bg-red-50 dark:bg-red-800;
}

.hint.error::selection {
  @apply bg-red-900 text-gray-50 dark:bg-gray-50 dark:text-red-900;
}

/*** remark-autolink-headings - link hash, similar to GitHub ones ***/
:is(h1, h2, h3, h4):hover > .icon-link {
  @apply opacity-100;
}

.icon-link {
  @apply absolute -ml-6 text-gray-400 no-underline shadow-none opacity-0 2xl:-ml-12 hover:text-gray-400 hover:no-underline;
}

.icon-link::before {
  content: "#";
}

.will-change {
  will-change: transform;
}
